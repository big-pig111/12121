# åå°ç®¡ç†ç³»ç»Ÿ - é¢†ä¸»å€’è®¡æ—¶å¥–åŠ±åœ°å€æ§åˆ¶åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æ–°å¢äº†"é¢†ä¸»å€’è®¡æ—¶å¥–åŠ±åœ°å€æ§åˆ¶"åŠŸèƒ½ï¼Œå…è®¸ç®¡ç†å‘˜ç›´æ¥è¾“å…¥åœ°å€ï¼Œä¸ºæŒ‡å®šåœ°å€åˆ›å»ºä¸»å€’è®¡æ—¶ç§¯åˆ†å¥–åŠ±ã€‚è¯¥åŠŸèƒ½å®Œå…¨åŸºäºåç«¯æ•°æ®åº“ï¼Œä¸ä¾èµ–æœ¬åœ°å­˜å‚¨ã€‚

## æ–°å¢åŠŸèƒ½

### 1. å¥–åŠ±åœ°å€æ§åˆ¶é¢æ¿

åœ¨ `admin.html` ä¸­æ–°å¢äº†ä¸“é—¨çš„é…ç½®é¢æ¿ï¼š

- **é¢æ¿æ ‡é¢˜**: Main Countdown Reward Address Control
- **å›¾æ ‡**: ğŸ‘‘ (çš‡å† å›¾æ ‡)
- **çŠ¶æ€æŒ‡ç¤ºå™¨**: æ˜¾ç¤ºå½“å‰å¥–åŠ±åœ°å€è®¾ç½®çŠ¶æ€

### 2. è¾“å…¥å­—æ®µ

- **Reward Address**: è¾“å…¥ Solana é’±åŒ…åœ°å€
- **Reward Amount**: è®¾ç½®å¥–åŠ±ç§¯åˆ†æ•°é‡ (é»˜è®¤ 100,000 ç§¯åˆ†)
- **Reward Description**: å¥–åŠ±æè¿°ä¿¡æ¯

### 3. æ“ä½œæŒ‰é’®

- **Validate Address**: éªŒè¯åœ°å€æ ¼å¼
- **Clear Reward**: æ¸…é™¤å½“å‰å¥–åŠ±è®¾ç½®
- **Save Reward Address**: ä¿å­˜å¥–åŠ±åœ°å€é…ç½®

### 4. çŠ¶æ€æ˜¾ç¤º

å®æ—¶æ˜¾ç¤ºå½“å‰å¥–åŠ±çŠ¶æ€ï¼š
- å½“å‰åœ°å€
- å¥–åŠ±é‡‘é¢
- é¢†å–çŠ¶æ€

## æŠ€æœ¯å®ç°

### 1. å‰ç«¯ç•Œé¢ (`admin.html`)

```html
<!-- Main Countdown Reward Address Control Panel -->
<section class="config-panel">
    <div class="panel-header">
        <h2 class="panel-title">
            <i class="fa fa-crown"></i>
            Main Countdown Reward Address Control
        </h2>
        <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
    </div>
    
    <div class="panel-content">
        <!-- è¾“å…¥å­—æ®µå’Œæ“ä½œæŒ‰é’® -->
    </div>
</section>
```

### 2. åç«¯é€»è¾‘ (`admin.js`)

#### æ ¸å¿ƒæ–¹æ³•

- `validateRewardAddress()`: éªŒè¯ Solana åœ°å€æ ¼å¼
- `saveRewardAddressConfig()`: ä¿å­˜å¥–åŠ±é…ç½®åˆ° Firebase
- `clearRewardAddress()`: æ¸…é™¤å¥–åŠ±é…ç½®
- `updateRewardAddressStatus()`: æ›´æ–°çŠ¶æ€æ˜¾ç¤º
- `checkRewardClaimStatus()`: æ£€æŸ¥é¢†å–çŠ¶æ€

#### å¥–åŠ±æ•°æ®ç»“æ„

```javascript
const rewardData = {
    id: `admin_reward_${Date.now()}`,
    type: 'main-countdown',
    round: 1,
    amount: amount,
    winner: address,
    transactionAmount: 0,
    timestamp: Date.now(),
    claimed: false,
    createdAt: new Date().toISOString(),
    snapshotId: `admin_snapshot_${Date.now()}`,
    evidence: {
        address: address,
        transactionSignature: 'admin_set',
        transactionAmount: 0,
        transactionType: 'admin_reward'
    },
    rewardDetails: {
        rewardType: 'main_countdown_winner',
        eligibilityCriteria: 'admin_set_reward',
        winnerDeterminationTime: new Date().toISOString(),
        description: description
    },
    status: {
        created: true,
        claimed: false,
        claimedAt: null,
        claimTransactionHash: null,
        setBy: 'admin_panel'
    }
};
```

### 3. æ ·å¼è®¾è®¡ (`admin.css`)

æ–°å¢äº†ä¸“é—¨çš„ CSS æ ·å¼ç±»ï¼š

- `.reward-address-control`: æ§åˆ¶é¢æ¿æ ·å¼
- `.reward-address-status`: çŠ¶æ€æ˜¾ç¤ºæ ·å¼
- `.reward-address-info`: ä¿¡æ¯å±•ç¤ºæ ·å¼

### 4. åç«¯é›†æˆ (`BackendManager.js`)

ç¡®ä¿ `mainCountdownRewards` Firebase å¼•ç”¨å·²æ­£ç¡®é…ç½®ï¼š

```javascript
this.firebaseRefs = {
    // ... å…¶ä»–å¼•ç”¨
    mainCountdownRewards: firebase.database().ref('mainCountdownRewards')
};
```

## ä½¿ç”¨æµç¨‹

### 1. è®¾ç½®å¥–åŠ±åœ°å€

1. æ‰“å¼€åå°ç®¡ç†ç³»ç»Ÿ (`admin.html`)
2. æ‰¾åˆ°"Main Countdown Reward Address Control"é¢æ¿
3. è¾“å…¥ Solana é’±åŒ…åœ°å€
4. è®¾ç½®å¥–åŠ±ç§¯åˆ†æ•°é‡
5. æ·»åŠ å¥–åŠ±æè¿°
6. ç‚¹å‡»"Validate Address"éªŒè¯åœ°å€æ ¼å¼
7. ç‚¹å‡»"Save Reward Address"ä¿å­˜é…ç½®

### 2. éªŒè¯åŠŸèƒ½

1. æ‰“å¼€æµ‹è¯•é¡µé¢ (`test_admin_reward_address.html`)
2. è¾“å…¥ç›¸åŒçš„åœ°å€è¿›è¡Œæµ‹è¯•
3. ç‚¹å‡»"Test Functionality"è¿›è¡Œå®Œæ•´æµ‹è¯•
4. æ£€æŸ¥æµ‹è¯•æ—¥å¿—ç¡®è®¤åŠŸèƒ½æ­£å¸¸

### 3. æ£€æŸ¥é¢†å–çŠ¶æ€

1. åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æŸ¥çœ‹çŠ¶æ€æ˜¾ç¤º
2. ä½¿ç”¨"Check Reward Status"åŠŸèƒ½
3. ç¡®è®¤å¥–åŠ±æ˜¯å¦å¯ç”¨äºé¢†å–

## æµ‹è¯•é¡µé¢

åˆ›å»ºäº†ä¸“é—¨çš„æµ‹è¯•é¡µé¢ `test_admin_reward_address.html`ï¼š

### åŠŸèƒ½ç‰¹æ€§

- **åœ°å€éªŒè¯**: éªŒè¯ Solana åœ°å€æ ¼å¼
- **å¥–åŠ±åˆ›å»º**: åˆ›å»ºæµ‹è¯•å¥–åŠ±åˆ°åç«¯
- **çŠ¶æ€æ£€æŸ¥**: æ£€æŸ¥å¥–åŠ±é¢†å–çŠ¶æ€
- **æ•°æ®æ¸…ç†**: æ¸…é™¤æµ‹è¯•æ•°æ®
- **å®Œæ•´æµ‹è¯•**: ä¸€é”®æ‰§è¡Œæ‰€æœ‰æµ‹è¯•æ­¥éª¤

### ä½¿ç”¨æ–¹æ³•

1. æ‰“å¼€ `test_admin_reward_address.html`
2. è¾“å…¥æµ‹è¯•åœ°å€ (é»˜è®¤å·²å¡«å…¥æµ‹è¯•åœ°å€)
3. ç‚¹å‡»"Test Functionality"æ‰§è¡Œå®Œæ•´æµ‹è¯•
4. æŸ¥çœ‹æµ‹è¯•æ—¥å¿—äº†è§£æ‰§è¡Œç»“æœ

## æ•°æ®æµç¨‹

### 1. ç®¡ç†å‘˜è®¾ç½®

```
ç®¡ç†å‘˜è¾“å…¥åœ°å€ â†’ éªŒè¯æ ¼å¼ â†’ ä¿å­˜åˆ° Firebase â†’ æ›´æ–°çŠ¶æ€æ˜¾ç¤º
```

### 2. ç”¨æˆ·é¢†å–

```
ç”¨æˆ·è¿æ¥é’±åŒ… â†’ æ£€æŸ¥å¥–åŠ±èµ„æ ¼ â†’ æ˜¾ç¤ºå¯é¢†å–å¥–åŠ± â†’ æ‰§è¡Œé¢†å–æ“ä½œ
```

### 3. çŠ¶æ€åŒæ­¥

```
Firebase æ•°æ®å˜åŒ– â†’ å®æ—¶åŒæ­¥åˆ°å‰ç«¯ â†’ æ›´æ–°çŠ¶æ€æ˜¾ç¤º â†’ è®°å½•æ“ä½œæ—¥å¿—
```

## å®‰å…¨ç‰¹æ€§

### 1. åœ°å€éªŒè¯

- ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ Solana åœ°å€æ ¼å¼
- æ”¯æŒ 32-44 å­—ç¬¦çš„ Base58 ç¼–ç åœ°å€

### 2. æ•°æ®å®Œæ•´æ€§

- æ‰€æœ‰å¥–åŠ±æ•°æ®åŒ…å«å®Œæ•´çš„å…ƒæ•°æ®
- è®°å½•åˆ›å»ºæ—¶é—´ã€è®¾ç½®æ¥æºç­‰ä¿¡æ¯
- é˜²æ­¢é‡å¤åˆ›å»ºç›¸åŒå¥–åŠ±

### 3. æƒé™æ§åˆ¶

- åªæœ‰ç®¡ç†å‘˜å¯ä»¥è®¾ç½®å¥–åŠ±åœ°å€
- æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹å’Œé¢†å–å¥–åŠ±

## é”™è¯¯å¤„ç†

### 1. ç½‘ç»œé”™è¯¯

- Firebase è¿æ¥å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- æä¾›é‡è¯•æœºåˆ¶

### 2. æ•°æ®éªŒè¯

- åœ°å€æ ¼å¼é”™è¯¯æ—¶æç¤ºç”¨æˆ·
- å¿…å¡«å­—æ®µéªŒè¯

### 3. çŠ¶æ€åŒæ­¥

- å®æ—¶çŠ¶æ€æ›´æ–°å¤±è´¥æ—¶é™çº§åˆ°æœ¬åœ°æ˜¾ç¤º
- æä¾›æ‰‹åŠ¨åˆ·æ–°åŠŸèƒ½

## æ‰©å±•æ€§

### 1. æ‰¹é‡æ“ä½œ

å¯ä»¥æ‰©å±•æ”¯æŒæ‰¹é‡è®¾ç½®å¤šä¸ªåœ°å€çš„å¥–åŠ±

### 2. å¥–åŠ±æ¨¡æ¿

å¯ä»¥åˆ›å»ºé¢„è®¾çš„å¥–åŠ±æ¨¡æ¿ï¼Œå¿«é€Ÿåº”ç”¨

### 3. å†å²è®°å½•

å¯ä»¥æ·»åŠ å¥–åŠ±è®¾ç½®çš„å†å²è®°å½•åŠŸèƒ½

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®å¤‡ä»½**: æ‰€æœ‰å¥–åŠ±æ•°æ®éƒ½ä¿å­˜åœ¨ Firebase ä¸­ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
2. **æƒé™ç®¡ç†**: åªæœ‰ç®¡ç†å‘˜å¯ä»¥è®¿é—®æ­¤åŠŸèƒ½
3. **åœ°å€æ ¼å¼**: å¿…é¡»ä½¿ç”¨æ­£ç¡®çš„ Solana åœ°å€æ ¼å¼
4. **å¥–åŠ±é‡‘é¢**: å»ºè®®è®¾ç½®åˆç†çš„å¥–åŠ±é‡‘é¢ï¼Œé¿å…ç³»ç»Ÿè´Ÿæ‹…
5. **æµ‹è¯•éªŒè¯**: åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œå»ºè®®å…ˆåœ¨æµ‹è¯•é¡µé¢éªŒè¯åŠŸèƒ½

## æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

- `admin.html`: æ–°å¢å¥–åŠ±åœ°å€æ§åˆ¶é¢æ¿
- `admin.js`: æ–°å¢ç›¸å…³åŠŸèƒ½æ–¹æ³•
- `admin.css`: æ–°å¢æ ·å¼å®šä¹‰

### æ–°å¢çš„æ–‡ä»¶

- `test_admin_reward_address.html`: æµ‹è¯•é¡µé¢
- `ADMIN_REWARD_ADDRESS_CONTROL_README.md`: è¯´æ˜æ–‡æ¡£

### ä¾èµ–çš„æ–‡ä»¶

- `js/modules/BackendManager.js`: åç«¯ç®¡ç†å™¨
- Firebase SDK: æ•°æ®åº“è¿æ¥

## æ€»ç»“

è¿™ä¸ªæ–°åŠŸèƒ½ä¸ºåå°ç®¡ç†ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„å¥–åŠ±æ§åˆ¶èƒ½åŠ›ï¼Œç®¡ç†å‘˜å¯ä»¥ï¼š

1. **çµæ´»è®¾ç½®**: éšæ—¶ä¸ºæŒ‡å®šåœ°å€è®¾ç½®å¥–åŠ±
2. **å®æ—¶ç›‘æ§**: æŸ¥çœ‹å¥–åŠ±çŠ¶æ€å’Œé¢†å–æƒ…å†µ
3. **å®‰å…¨å¯é **: åŸºäº Firebase åç«¯ï¼Œæ•°æ®å®‰å…¨å¯é 
4. **æ˜“äºä½¿ç”¨**: ç®€æ´çš„ç•Œé¢å’Œæ¸…æ™°çš„æ“ä½œæµç¨‹

è¯¥åŠŸèƒ½å®Œå…¨æ»¡è¶³äº†ç”¨æˆ·éœ€æ±‚ï¼Œæä¾›äº†ä¾¿æ·çš„é¢†ä¸»å€’è®¡æ—¶å¥–åŠ±åœ°å€æ§åˆ¶èƒ½åŠ›ã€‚ 